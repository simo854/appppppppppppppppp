<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- ===== DYNAMIC META TAGS - سيتم تحديثها تلقائياً ===== -->

    <!-- Basic Meta Tags -->
    <title id="page-title">ViewMax - Watch Movies & TV Shows Online Free</title>
    <meta name="description" id="page-description"
        content="Stream thousands of movies and TV shows for free. Watch the latest releases, classic films, and popular series in HD quality on ViewMax.">
    <meta name="keywords" id="page-keywords"
        content="movies, tv shows, streaming, watch online, free movies, series, entertainment, hd quality">

    <!-- Static Meta Tags -->
    <meta name="author" content="ViewMax">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="rating" content="general">
    <meta name="distribution" content="global">
    <meta name="revisit-after" content="7 days">
    <meta name="language" content="English">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <!-- Security and Protection -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="scriptsAll/dataProtection.js"></script>
    <script src="scriptsAll/secureDataLoader.js"></script>

    <!-- ===== DYNAMIC OPEN GRAPH TAGS ===== -->
    <meta property="og:site_name" content="ViewMax">
    <meta property="og:locale" content="en_US">
    <meta property="og:type" id="og-type" content="website">
    <meta property="og:title" id="og-title" content="ViewMax - Watch Movies & TV Shows Online Free">
    <meta property="og:description" id="og-description"
        content="Stream thousands of movies and TV shows for free. Watch the latest releases, classic films, and popular series in HD quality.">
    <meta property="og:url" id="og-url" content="">
    <meta property="og:image" id="og-image" content="/images/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" id="og-image-alt" content="ViewMax - Free Movie and TV Show Streaming">
    <meta property="og:image:type" content="image/jpeg">


    <!-- ===== DYNAMIC TWITTER CARD TAGS ===== -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@ViewMax">
    <meta name="twitter:creator" content="@ViewMax">
    <meta name="twitter:title" id="twitter-title" content="ViewMax - Watch Movies & TV Shows Online Free">
    <meta name="twitter:description" id="twitter-description"
        content="Stream thousands of movies and TV shows for free. Watch the latest releases in HD quality.">
    <meta name="twitter:image" id="twitter-image" content="/images/twitter-card.jpg">
    <meta name="twitter:image:alt" id="twitter-image-alt" content="ViewMax - Free Movie and TV Show Streaming">

    <!-- ===== ADDITIONAL SEO META TAGS ===== -->
    <meta name="theme-color" content="#adff2f">
    <meta name="msapplication-TileColor" content="#adff2f">
    <meta name="application-name" content="ViewMax">
    <meta name="apple-mobile-web-app-title" content="ViewMax">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">

    <!-- Content Classification -->
    <meta name="content-type" content="text/html; charset=UTF-8">
    <meta name="content-language" content="en">
    <meta name="geo.region" content="US">
    <meta name="geo.placename" content="United States">

    <!-- Streaming Platform Specific -->
    <meta name="streaming-platform" content="ViewMax">
    <meta name="content-availability" content="free">
    <meta name="video-quality" content="HD">
    <meta name="supported-devices" content="desktop, mobile, tablet, smart-tv">

    <!-- ===== DYNAMIC CANONICAL URL ===== -->
    <link rel="canonical" id="canonical-link" href="">

    <!-- Alternate Language Versions -->
    <link rel="alternate" hreflang="en" href="">
    <link rel="alternate" hreflang="en-US" href="">
    <link rel="alternate" hreflang="x-default" href="">

    <!-- ===== FAVICON AND APP ICONS ===== -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#adff2f">


    <!-- Windows Tiles -->
    <meta name="msapplication-square70x70logo" content="/icons/icon-70x70.png">
    <meta name="msapplication-square150x150logo" content="/icons/icon-150x150.png">
    <meta name="msapplication-wide310x150logo" content="/icons/icon-310x150.png">
    <meta name="msapplication-square310x310logo" content="/icons/icon-310x310.png">

    <!-- Preload Critical Resources -->
    <link rel="preload" href="/css/style.css" as="style">
    <link rel="preload" href="/css/header.css" as="style">
    <link rel="preload" href="/css/HandF.css" as="style">
    <link rel="preload" href="/scriptsAll/new.js" as="script">
    <link rel="preload" href="/scriptsAll/pwa-manager.js" as="script">

    <!-- ===== DNS PREFETCH FOR PERFORMANCE ===== -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="//www.youtube.com">
    <link rel="dns-prefetch" href="//images.unsplash.com">

    <!-- Preconnect for Critical Resources -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>


    <!-- iOS Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#ff6b6b">
    <link rel="manifest" href="manifest.json">


    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="css/HandF.css">

    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/main.css">


</head>

<body>
    <!-- Header -->
    <header id="header">
        <div class="header-container">
            <div class="logo">
                <div class="hamburger" id="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <a href="Home.html" class="logo-link">
                    <img src="images/imdb/logo.png" alt="ViewMax Logo" loading="lazy">
                    ViewMax
                </a>
            </div>

            <nav class="main-nav" id="mainNav">
                <ul>
                    <li><a href="Home.html" class="active">Home</a></li>
                    <li><a href="trending.html">Trending</a></li>
                    <li><a href="movies.html">Movies</a></li>
                    <li><a href="series.html">Series</a></li>
                    <li><a href="imdb.html">Top Rated</a></li>
                </ul>
            </nav>

            <div class="search-container" id="searchContainer">
                <input type="text" class="search-input" id="searchInput" placeholder="Search movies, series..."
                    autocomplete="off">
                <div class="search-icon" id="searchToggle">
                    <i class="fas fa-search"></i>
                </div>
                <ul id="suggestionsList" class="suggestions-list"></ul>
            </div>

            <!-- Mobile Search Icon (480px and below) -->
            <div class="mobile-search-toggle" id="mobileSearchToggle">
                <i class="fas fa-search"></i>
            </div>
        </div>

        <!-- Mobile Search Bar (slides down when clicked) -->
        <div class="mobile-search-bar" id="mobileSearchBar">
            <div class="mobile-search-container">
                <input type="text" class="mobile-search-input" id="mobileSearchInput"
                    placeholder="Search movies, series..." autocomplete="off">
                <div class="mobile-search-close" id="mobileSearchClose">
                    <i class="fas fa-times"></i>
                </div>
            </div>
            <ul id="mobileSuggestionsList" class="mobile-suggestions-list"></ul>
        </div>
    </header>

    <!-- Hero Section -->
    <!-- HTML for Hero Section with Film Slider -->
    <section class="hero-slider">
        <div class="slider-container">
            <div class="slider-track">
                <!-- Slides will be added by JavaScript -->
            </div>
        </div>
        <div class="slider-content">
            <h1 class="movie-title"></h1>
            <p>Watch trending movies instantly.</p>
            <a href="player.html" class="btn play-now" data-title="">Play</a>
        </div>
        <div class="slider-controls">
            <button class="prev-btn"><i class="fa-solid fa-arrow-left"></i></button>
            <button class="next-btn"><i class="fa-solid fa-arrow-right"></i></button>
            <div class="dots-container">
                <!-- Dots will be added by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Trending Section -->
        <section class="content-section" id="trending">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-fire"></i>
                    Trending Now
                </h2>
                <a href="trending.html" class="see-all-btn">See All</a>
            </div>
            <div class="content-row trendings">
                <div class="movie-card">
                    <a href="player.html" class="movie-link" data-name="Warfare">
                        <img src="images/trending(M)/Warfare.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Warfare</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="player.html" class="movie-link" data-name="Van Gogh by Vincent">
                        <img src="images/trending(M)/Van Gogh by Vincent.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Van Gogh by Vincent</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="player.html" class="movie-link" data-name="A Working Man">
                        <img src="images/trending(M)/A Working Man.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>A Working Man</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="player.html" class="movie-link" data-name="Havoc">
                        <img src="images/trending(M)/Havoc.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Havoc</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="player.html" class="movie-link" data-name="The Accountant">
                        <img src="images/trending(M)/The Accountant².webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>The Accountant</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="player.html" class="movie-link" data-name="The Suicide Squad">
                        <img src="images/trending(M)/The Suicide Squad.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>The Suicide Squad</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="player.html" class="movie-link" data-name="Sinners">
                        <img src="images/trending(M)/Sinners.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Sinners</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="player.html" class="movie-link" data-name="Rust">
                        <img src="images/trending(M)/Rust.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Rust</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="player.html" class="movie-link" data-name="Black Widow">
                        <img src="images/trending(M)/Black Widow.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Black Widow</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="player.html" class="movie-link" data-name="Parasite">
                        <img src="images/trending(M)/Parasite.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Parasite</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="player.html" class="movie-link" data-name="Sonic the Hedgehog 3">
                        <img src="images/trending(M)/Sonic the Hedgehog 3.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Sonic the Hedgehog 3</h3>
                    </div>
                </div>
            </div>
        </section>

        <!-- Top Rated Movies Section -->
        <section class="content-section" id="topRated">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-star"></i>
                    Top Rated Movies
                </h2>
                <a href="imdb.html" class="see-all-btn">See All</a>
            </div>
            <div class="content-row">
                <div class="movie-card">
                    <a href="player.html" class="movie-link" data-name="The Shawshank Redemption">
                        <img src="images/imdb/The Shawshank Redemption.webp" loading="lazy">
                    </a>
                    <div class="movie-info">

                        <h3>The Shawshank Redemption</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="player.html" class="movie-link" data-name="The Godfather">
                        <img src="images/imdb/The Godfather.webp" loading="lazy">
                    </a>
                    <div class="movie-info">

                        <h3>The Godfather</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="player.html" class="movie-link"
                        data-name="The Lord of the Rings The Fellowship of the Ring">
                        <img src="images/top rt (M)/The Lord of the Rings The Fellowship of the Ring.webp"
                            loading="lazy">
                    </a>
                    <div class="movie-info">

                        <h3>The Lord of the Rings The Fellowship of the Ring</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="player.html" class="movie-link" data-name="The Pianist">
                        <img src="images/top rt (M)/The Pianist.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>The Pianist</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="player.html" class="movie-link" data-name="The Dark Knight">
                        <img src="images/imdb/The Dark Knight.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>The Dark Knight</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="player.html" class="movie-link" data-name="The Godfather Part II">
                        <img src="images/imdb/The Godfather Part II.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>The Godfather Part II</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="player.html" class="movie-link" data-name="12 Angry Men">
                        <img src="images/imdb/12 Angry Men.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>12 Angry Men</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="player.html" class="movie-link" data-name="Schindler's List">
                        <img src="images/imdb/Schindler's List.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Schindler's List</h3>
                    </div>
                </div>
            </div>
        </section>

        <!-- Popular Series Section -->
        <section class="content-section" id="popularSeries">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-tv"></i>
                    Popular Series
                </h2>
                <a href="#" class="see-all-btn">See All</a>
            </div>
            <div class="content-row">
                <div class="movie-card">
                    <a href="Seriesplayer.html" class="movie-link" data-name="Daredevil: Born Again" data-type="Series">
                        <img src="images/trnding(S)/Daredevil Born Again.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Daredevil: Born Again</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="Seriesplayer.html" class="movie-link" data-name="Yellowstone" data-type="Series">
                        <img src="images/trnding(S)/Yellowstone.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Yellowstone</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="Seriesplayer.html" class="movie-link" data-name="Reacher" data-type="Series">
                        <img src="images/trnding(S)/Reacher.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Reacher</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="Seriesplayer.html" class="movie-link" data-name="MobLand" data-type="Series">
                        <img src="images/trnding(S)/MobLand.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>MobLand</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="Seriesplayer.html" class="movie-link" data-name="The Last of Us" data-type="Series">
                        <img src="images/trnding(S)/The Last of Us.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>The Last of Us</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="Seriesplayer.html" class="movie-link" data-name="The Walking Dead: Dead City"
                        data-type="Series">
                        <img src="images/trnding(S)/The Walking DeadDead City.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>The Walking Dead: Dead City</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="Seriesplayer.html" class="movie-link" data-name="The Eternaut" data-type="Series">
                        <img src="images/trnding(S)/The Eternaut.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>The Eternaut</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="Seriesplayer.html" class="movie-link" data-name="Arcane" data-type="Series">
                        <img src="images/trnding(S)/Arcane.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Arcane</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="Seriesplayer.html" class="movie-link" data-name="Andor" data-type="Series">
                        <img src="images/trnding(S)/Andor.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Andor</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="Seriesplayer.html" class="movie-link" data-name="Franklin" data-type="Series">
                        <img src="images/trnding(S)/Franklin.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Franklin</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="Seriesplayer.html" class="movie-link" data-name="Your Friends & Neighbors"
                        data-type="Series">
                        <img src="images/trnding(S)/Your Friends & Neighbors.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Your Friends & Neighbors</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="Seriesplayer.html" class="movie-link" data-name="Rotten Legacy" data-type="Series">
                        <img src="images/trnding(S)/Rotten Legacy.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Rotten Legacy</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="Seriesplayer.html" class="movie-link" data-name="Loki" data-type="Series">
                        <img src="images/trnding(S)/Loki.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Loki</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="Seriesplayer.html" class="movie-link" data-name="Bleach" data-type="Series">
                        <img src="images/trnding(S)/Bleach.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Bleach</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="Seriesplayer.html" class="movie-link" data-name="The Prisoner of Beauty"
                        data-type="Series">
                        <img src="images/trnding(S)/The Prisoner of Beauty.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>The Prisoner of Beauty</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="Seriesplayer.html" class="movie-link" data-name="Murderbot" data-type="Series">
                        <img src="images/trnding(S)/Murderbot.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Murderbot</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="Seriesplayer.html" class="movie-link" data-name="Love, Death & Robots" data-type="Series">
                        <img src="images/trnding(S)/Love, Death & Robots.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Love, Death & Robots</h3>
                    </div>
                </div>
                <div class="movie-card">
                    <a href="Seriesplayer.html" class="movie-link" data-name="Overcompensating" data-type="Series">
                        <img src="images/trnding(S)/Overcompensating.webp" loading="lazy">
                    </a>
                    <div class="movie-info">
                        <h3>Overcompensating</h3>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>ViewMax</h3>
                <p>Your ultimate destination for movies and TV shows. Stream unlimited content with the best quality and
                    experience.</p>
            </div>
            <div class="footer-section">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="Home.html">Home</a></li>
                    <li><a href="trending.html">Trending</a></li>
                    <li><a href="imdb.html">Top Rated</a></li>
                    <li><a href="#">About Us</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Categories</h4>
                <ul>
                    <li><a href="#">Movies</a></li>
                    <li><a href="#">TV Series</a></li>
                    <li><a href="#">Documentaries</a></li>
                    <li><a href="#">Anime</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>Follow Us</h4>
                <div class="social-links">
                    <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                    <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>This site does not store any files on our server, we only linked to the media which is hosted on 3rd
                party services.</p>
        </div>
    </footer>

    <!-- Loading Spinner -->
    <div class="loading-spinner" id="loadingSpinner">
        <div class="spinner"></div>
    </div>


    <!-- Enhanced JavaScript with Mobile Search -->
    <script src="scriptsAll/security-config.js"></script>
    <script src="scriptsAll/meta-integration.js"></script>

    <script src="scriptsAll/ne.js"></script>
    <script src="scriptsAll/hero.js"></script>
    <script src="scriptsAll/dataProtection.js"></script>
    <script src="scriptsAll/secureDataLoader.js"></script>
    <script src="api-integration.js"></script>

    <script src="scriptsAll/console-silencer.js"></script>
    <script src="scriptsAll/simpleCardSlider.js"></script>
    <script>
        // ViewMax PWA Install Manager - Floating Card Fixed Version
        console.log('🎬 ViewMax PWA Manager Loading...');

        class PWAInstallManager {
            constructor() {
                this.deferredPrompt = null;
                this.isAppMode = this.detectAppMode();
                this.init();
            }

            detectAppMode() {
                return (
                    window.matchMedia('(display-mode: standalone)').matches ||
                    window.navigator.standalone === true
                );
            }

            init() {
                console.log('App Mode:', this.isAppMode);

                // Only show install card if not in app mode (always show in browser)
                if (!this.isAppMode) {
                    this.setupInstallPrompt();
                    this.setupScrollListener();
                }
            }

            setupScrollListener() {
                let isCardVisible = false;

                const checkScrollPosition = () => {
                    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                    const windowHeight = window.innerHeight;
                    const documentHeight = document.documentElement.scrollHeight;

                    // Check if user has scrolled to bottom (with 100px threshold)
                    const isAtBottom = scrollTop + windowHeight >= documentHeight - 100;

                    if (isAtBottom && !isCardVisible) {
                        this.showInstallCard();
                        isCardVisible = true;
                    } else if (!isAtBottom && isCardVisible) {
                        this.hideInstallCard();
                        isCardVisible = false;
                    }
                };

                // Throttle scroll events for better performance
                let scrollTimeout;
                window.addEventListener('scroll', () => {
                    clearTimeout(scrollTimeout);
                    scrollTimeout = setTimeout(checkScrollPosition, 100);
                });

                // Also check on resize
                window.addEventListener('resize', checkScrollPosition);
            }

            setupInstallPrompt() {
                window.addEventListener('beforeinstallprompt', (e) => {
                    e.preventDefault();
                    this.deferredPrompt = e;
                    console.log('✅ Install prompt ready');
                });

                window.addEventListener('appinstalled', () => {
                    console.log('✅ App installed');
                });
            }

            showInstallCard() {
                // Don't show if already exists
                if (document.getElementById('pwa-install-card')) return;

                this.createInstallCard();
            }

            createInstallCard() {
                // Remove any existing install card
                const existingCard = document.getElementById('pwa-install-card');
                if (existingCard) {
                    existingCard.remove();
                }

                const installCard = document.createElement('div');
                installCard.id = 'pwa-install-card';
                installCard.innerHTML = `
                    <div id="pwa-install-button" style="
                        position: fixed !important;
                        bottom: 20px !important;
                        left: 50% !important;
                        transform: translateX(-50%) !important;
                        background: linear-gradient(135deg, #4CAF50, #45a049) !important;
                        color: white !important;
                        padding: 15px 20px !important;
                        border-radius: 12px !important;
                        box-shadow: 0 4px 20px rgba(76, 175, 80, 0.3) !important;
                        cursor: pointer !important;
                        z-index: 2147483647 !important;
                        transition: all 0.3s ease !important;
                        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
                        user-select: none !important;
                        display: flex !important;
                        align-items: center !important;
                        gap: 12px !important;
                        font-size: 16px !important;
                        font-weight: 600 !important;
                        animation: slideUpIn 0.5s ease-out !important;
                        min-width: 200px !important;
                        justify-content: center !important;
                        pointer-events: auto !important;
                        width: auto !important;
                        height: auto !important;
                        margin: 0 !important;
                        max-width: calc(100vw - 40px) !important;
                        backdrop-filter: blur(10px) !important;
                        border: 2px solid rgba(255, 255, 255, 0.2) !important;
                        white-space: nowrap !important;
                    " onclick="window.pwaManager.handleInstall()" 
                       onmouseover="this.style.transform='translateX(-50%) scale(1.05)'; this.style.boxShadow='0 6px 25px rgba(76, 175, 80, 0.4)'" 
                       onmouseout="this.style.transform='translateX(-50%) scale(1)'; this.style.boxShadow='0 4px 20px rgba(76, 175, 80, 0.3)'"
                       title="Install ViewMax App">
                        <span style="font-size: 24px;">📱</span>
                        <span>Install ViewMax App</span>
                    </div>
                    <style>
                        @keyframes slideUpIn {
                            0% { transform: translateX(-50%) translateY(100px); opacity: 0; }
                            100% { transform: translateX(-50%) translateY(0); opacity: 1; }
                        }
                        
                        @keyframes slideDownOut {
                            0% { transform: translateX(-50%) translateY(0); opacity: 1; }
                            100% { transform: translateX(-50%) translateY(100px); opacity: 0; }
                        }
                        
                        @media (max-width: 480px) {
                            #pwa-install-button {
                                bottom: 10px !important;
                                left: 10px !important;
                                right: 10px !important;
                                transform: none !important;
                                padding: 12px 16px !important;
                                font-size: 14px !important;
                                min-width: auto !important;
                                width: calc(100vw - 40px) !important;
                                max-width: calc(100vw - 40px) !important;
                            }
                            #pwa-install-button span:first-child {
                                font-size: 20px !important;
                            }
                            @keyframes slideUpIn {
                                0% { transform: translateY(100px); opacity: 0; }
                                100% { transform: translateY(0); opacity: 1; }
                            }
                            @keyframes slideDownOut {
                                0% { transform: translateY(0); opacity: 1; }
                                100% { transform: translateY(100px); opacity: 0; }
                            }
                        }
                    </style>
                `;

                // Create the card as a direct child of body with highest z-index
                installCard.style.cssText = '';
                document.body.appendChild(installCard);

                console.log('📱 Install card shown when user scrolled to bottom');
            }

            async handleInstall() {
                if (this.deferredPrompt) {
                    try {
                        await this.deferredPrompt.prompt();
                        const result = await this.deferredPrompt.userChoice;

                        if (result.outcome === 'accepted') {
                            console.log('✅ User accepted install');
                            this.hideInstallCard();
                        } else {
                            console.log('❌ User dismissed install');
                        }

                        this.deferredPrompt = null;
                    } catch (error) {
                        console.error('Install error:', error);
                        this.showManualInstructions();
                    }
                } else {
                    this.showManualInstructions();
                }
            }

            hideInstallCard() {
                const card = document.getElementById('pwa-install-card');
                if (card) {
                    const button = card.querySelector('#pwa-install-button');
                    if (button) {
                        button.style.animation = 'slideDownOut 0.3s ease-in forwards';
                    }
                    setTimeout(() => card.remove(), 300);
                }
            }

            showManualInstructions() {
                const instructions = document.createElement('div');
                instructions.innerHTML = `
                    <div style="
                        position: fixed;
                        top: 0;
                        left: 0;
                        right: 0;
                        bottom: 0;
                        background: rgba(0,0,0,0.8);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        z-index: 10001;
                        animation: fadeIn 0.3s ease-out;
                    ">
                        <div style="
                            background: white;
                            padding: 30px;
                            border-radius: 15px;
                            max-width: 350px;
                            width: 90%;
                            text-align: center;
                        ">
                            <div style="font-size: 48px; margin-bottom: 20px;">📱</div>
                            <h2 style="margin: 0 0 15px 0; color: #333;">Install ViewMax</h2>
                            <p style="margin: 0 0 20px 0; color: #666; line-height: 1.5;">
                                To install this app:<br>
                                <strong>1.</strong> Tap the menu (⋮) button<br>
                                <strong>2.</strong> Select "Add to Home screen"<br>
                                <strong>3.</strong> Tap "Install" or "Add"
                            </p>
                            <button onclick="this.parentElement.parentElement.remove()" style="
                                background: #4CAF50;
                                color: white;
                                border: none;
                                padding: 12px 24px;
                                border-radius: 8px;
                                cursor: pointer;
                                font-weight: bold;
                                font-size: 16px;
                            ">Got it!</button>
                        </div>
                    </div>
                    <style>
                        @keyframes fadeIn {
                            from { opacity: 0; }
                            to { opacity: 1; }
                        }
                    </style>
                `;

                document.body.appendChild(instructions);
            }
        }

        // Initialize PWA Manager
        document.addEventListener('DOMContentLoaded', () => {
            window.pwaManager = new PWAInstallManager();
        });

        if (document.readyState !== 'loading') {
            window.pwaManager = new PWAInstallManager();
        }
    </script>



</body>

</html>